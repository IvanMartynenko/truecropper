<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="./static/favicon.ico?v=1" type="image/x-icon">
  <title>TrueCropper.js - Open Source Image Cropping Library</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <script src="./dist/trueCropper.js"></script>
  <link href="./dist/trueCropper.css" rel="stylesheet" />
</head>

<body class="bg-light">
  <main class="container">
    <section class="my-5 d-flex align-items-center justify-content-start">
      <img src="./static/logo.svg" alt="logo" style="max-width: 120px; margin-right: 20px;" />
      <div>
        <h4 class="m-0">TrueCropper.js</h4>
        <small class="m-0">Lightweight, real-size image, vanilla JS image cropping tools</small>
        <div class="mt-3">
          <a href="#install" class="btn btn-primary">Install</a>
          <a href="#install" class="btn btn-danger">Github</a>
        </div>
      </div>
    </section>

    <section class="card my-5">
      <div class="card-body">
        <div class="row">
          <div class="col-md-6">
            <h3>Real Pixels Mode (Natural)</h3>
            <p>Work with images in real pixel mode for accurate cropping.</p>
          </div>
          <div class="col-md-6">
            <h3>Customizable Options</h3>
            <p>Support for options through both JavaScript API and HTML dataset attributes.</p>
          </div>
          <div class="col-md-6">
            <h3>No Dependencies</h3>
            <p>TrueCropper.js is dependency-free, making integration seamless.</p>
          </div>
          <div class="col-md-6">
            <h3>Written in TypeScript</h3>
            <p>TrueCropper.js is developed using TypeScript for enhanced maintainability and scalability.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="card my-5 demo">
      <div class="card-body">
        <h3 class="mb-2">Demo</h3>
        <div class="mb-3" style="max-width: 300px;">
          <input class="form-control" type="file" id="demoFile">
        </div>

        <div class="d-flex justify-content-around flex-wrap">
          <div class="mt-3">
            <div class="truecropper">
              <img style="width: 100%; max-width: 500px;" src="./static/image.png" id="trueCropper" data-truecropper-aspect-ratio="1.5" data-truecropper-max-size-width="50" data-truecropper-max-size-unit="percent"/>
            </div>
            <div class="alert alert-danger d-none" id="demoError" role="alert"></div>
          </div>
          <div class="mt-3" style="max-width: 500px;">
            <form id="trueCropperForm">
              <div class="alert alert-dark text-center" id="demoValues" role="alert">
                <strong class="m-0">Selection value / </strong>
                <strong>x:</strong><span id="demoValuesX">0</span>
                <strong>y:</strong><span id="demoValuesY">0</span>
                <strong>width:</strong><span id="demoValuesWidth">0</span>
                <strong>height:</strong><span id="demoValuesHeight">0</span>
              </div>

              <div class="custom-group">
                <div class="d-flex justify-content-end flex-wrap">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" checked value="" id="demoResize"
                      name="demo[allowResize]">
                    <label class="form-check-label" for="demoResize">Allow resize</label>
                  </div>
                  <div class="form-check ms-4">
                    <input class="form-check-input" type="checkbox" checked value="" id="demoMove"
                      name="demo[allowMove]">
                    <label class="form-check-label" for="demoMove">Allow move</label>
                  </div>
                </div>
              </div>
              <div class="custom-group">
                <div class="d-flex justify-content-end flex-wrap">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" checked value="" id="demoFlipped"
                      name="demo[allowFlip]">
                    <label class="form-check-label" for="demoFlipped">Allow flip</label>
                  </div>
                  <div class="form-check ms-4">
                    <input class="form-check-input" type="checkbox" checked value="" id="demoNew"
                      name="demo[allowNewSelection]">
                    <label class="form-check-label" for="demoNew">Allow new selection</label>
                  </div>
                </div>
              </div>



              <div class="custom-group">
                <div class="d-flex justify-content-between">
                  <label>aspectRatio</label>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="minSizeCheckbox"
                      data-checkbox="values">
                    <label class="form-check-label" for="minSizeCheckbox">Enable</label>
                  </div>
                </div>
                <div class="input-group mb-3">
                  <span class="input-group-text">A</span>
                  <input type="number" class="form-control" value="1.0" aria-label="width" name="demo[aspectRatio]"
                    disabled>
                </div>
              </div>
              <div class="custom-group">
                <div class="d-flex justify-content-between">
                  <label>Maximum size</label>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="maxSizeCheckbox"
                      data-checkbox="values">
                    <label class="form-check-label" for="maxSizeCheckbox">Enable</label>
                  </div>
                </div>
                <div class="input-group mb-3">
                  <span class="input-group-text">W</span>
                  <input type="number" class="form-control" value="100" aria-label="width" disabled
                    name="demo[maxSize][width]">
                  <span class="input-group-text">H</span>
                  <input type="number" class="form-control" value="100" aria-label="height" disabled
                    name="demo[maxSize][height]">
                  <select class="form-select" disabled name="demo[maxSize][unit]"
                    style="max-width: 80px; min-width: 80px;">
                    <option>real</option>
                    <option>percent</option>
                    <option>relative</option>
                  </select>
                </div>
              </div>
              <div class="custom-group">
                <div class="d-flex justify-content-between">
                  <label>Minimum size</label>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="minSizeCheckbox"
                      data-checkbox="values">
                    <label class="form-check-label" for="minSizeCheckbox">Enable</label>
                  </div>
                </div>
                <div class="input-group mb-3">
                  <span class="input-group-text">W</span>
                  <input type="number" class="form-control" value="100" aria-label="width" disabled
                    name="demo[minSize][width]">
                  <span class="input-group-text">H</span>
                  <input type="number" class="form-control" value="100" aria-label="height" disabled
                    name="demo[minSize][height]">
                  <select class="form-select" disabled name="demo[minSize][unit]"
                    style="max-width: 80px; min-width: 80px;">
                    <option>real</option>
                    <option>percent</option>
                    <option>relative</option>
                  </select>
                </div>
              </div>
              <div class="custom-group">
                <div class="d-flex justify-content-between">
                  <label>Start size</label>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="startCheckbox" data-checkbox="values">
                    <label class="form-check-label" for="startCheckbox">Enable</label>
                  </div>
                </div>
                <div class="input-group mb-3">

                  <span class="input-group-text">x</span>
                  <input type="number" class="form-control" value="0" aria-label="width" disabled
                    name="demo[startSize][x]" style="min-width: 60px;">

                  <span class="input-group-text">y</span>
                  <input type="number" class="form-control" value="0" aria-label="width" disabled
                    name="demo[startSize][y]" style="min-width: 60px;">

                  <span class="input-group-text">W</span>
                  <input type="number" class="form-control" value="100" aria-label="width" disabled
                    name="demo[startSize][width]" style="min-width: 60px;">

                  <span class="input-group-text">H</span>
                  <input type="number" class="form-control" value="100" aria-label="height" disabled
                    name="demo[startSize][height]" style="min-width: 60px;">

                  <select class="form-select" disabled name="demo[startSize][unit]"
                    style="max-width: 80px; min-width: 80px;">
                    <option>real</option>
                    <option>percent</option>
                    <option>relative</option>
                  </select>
                </div>
              </div>
              <div class="custom-group">
                <div class="d-flex justify-content-between">
                  <label>Default size</label>
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="startCheckbox" data-checkbox="values">
                    <label class="form-check-label" for="startCheckbox">Enable</label>
                  </div>
                </div>
                <div class="input-group mb-3">

                  <span class="input-group-text">x</span>
                  <input type="number" class="form-control" value="0" aria-label="width" disabled
                    name="demo[defaultSize][x]" style="min-width: 60px;">

                  <span class="input-group-text">y</span>
                  <input type="number" class="form-control" value="0" aria-label="width" disabled
                    name="demo[defaultSize][y]" style="min-width: 60px;">

                  <span class="input-group-text">W</span>
                  <input type="number" class="form-control" value="100" aria-label="width" disabled
                    name="demo[defaultSize][width]" style="min-width: 60px;">

                  <span class="input-group-text">H</span>
                  <input type="number" class="form-control" value="100" aria-label="height" disabled
                    name="demo[defaultSize][height]" style="min-width: 60px;">

                  <select class="form-select" disabled name="demo[defaultSize][unit]"
                    style="max-width: 80px; min-width: 80px;">
                    <option>real</option>
                    <option>percent</option>
                    <option>relative</option>
                  </select>
                </div>
              </div>
            </form>
            <!-- end -->
          </div>
        </div>
      </div>
    </section>

    <section class="card my-5">
      <div class="card-body">
        <h2 class="text-center mb-4">Install</h2>
        <p>Documentation on how to use TrueCropper.js is available on the GitHub repository.</p>
        <a href="#github" class="btn btn-primary">View Documentation</a>
      </div>
    </section>

    <section class="card my-5">
      <div class="card-body">
        <h2 class="text-center mb-4">Basic usage</h2>
        <p>Documentation on how to use TrueCropper.js is available on the GitHub repository.</p>
        <a href="#github" class="btn btn-primary">View Documentation</a>
      </div>
    </section>
  </main>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
    integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
    crossorigin="anonymous"></script>
  <script>
    const demo = () => {
      let onpage = null;
      const setValue = (selector, val) => {
        const el = document.querySelector(selector);
        if (el) {
          el.innerHTML = val.toString();
        }
      };
      const defaultOptions = {
        returnMode: "real",
        allowFlip: true,
        allowNewSelection: true,
        allowResize: true,
        allowMove: true,
        onError: (klass, data) => {
          const error = document.querySelector("#demoError");
          if (error) {
            error.innerHTML = data.message;
            error.classList.remove("d-none");
          }
        },
        onCropEnd: (_klass, data) => {
          setValue("#demoValuesX", data.x);
          setValue("#demoValuesY", data.y);
          setValue("#demoValuesWidth", data.width);
          setValue("#demoValuesHeight", data.height);
        },
      };
      onpage = new trueCropper("#trueCropper", defaultOptions);
      const update = () => {
        var _a;
        const error = document.querySelector("#demoError");
        if (error) {
          error.classList.add("d-none");
        }
        const form = document.querySelector("#trueCropperForm");
        if (!form) {
          return;
        }
        const newOptions = {};
        const inputs = [...form.querySelectorAll("input[name]"), ...form.querySelectorAll("select[name]")];
        for (const el of inputs) {
          const input = el;
          if (input.disabled) {
            continue;
          }
          const [_, name, subName] = input.name.replace(/]/g, "").split("[");
          if (subName) {
            (_a = newOptions[name]) !== null && _a !== void 0 ? _a : (newOptions[name] = {});
            newOptions[name][subName] = subName === "unit" ? input.value : Number(input.value);
          }
          else {
            newOptions[name] = input.type === "checkbox" ? input.checked : Number(input.value);
          }
        }
        onpage?.destroy();
        console.log(Object.assign(Object.assign({}, defaultOptions), newOptions));
        onpage = new trueCropper("#trueCropper", Object.assign(Object.assign({}, defaultOptions), newOptions));
      };
      const form = document.querySelector("#trueCropperForm");
      if (!form) {
        return;
      }
      const img = document.querySelector("#trueCropper");
      const checkboxes = form.querySelectorAll('[data-checkbox="values"]');
      for (const el of checkboxes) {
        el.addEventListener("change", (e) => {
          var _a, _b;
          const target = e.target;
          if (!target) {
            return;
          }
          const checked = target.checked;
          const parent = (_b = (_a = target.parentNode) === null || _a === void 0 ? void 0 : _a.parentNode) === null || _b === void 0 ? void 0 : _b.parentNode;
          const inputs = (parent === null || parent === void 0 ? void 0 : parent.querySelectorAll("input[type='number']")) || [];
          for (const input of inputs) {
            const input2 = input;
            input2.disabled = !checked;
          }
          const select = parent === null || parent === void 0 ? void 0 : parent.querySelector("select");
          if (select) {
            select.disabled = !checked;
          }
          update();
        });
      }
      const inputs = form.querySelectorAll("input[name]");
      for (const el of inputs) {
        const input = el;
        input.addEventListener("change", (e) => {
          update();
        });
      }
      const selects = form.querySelectorAll("select[name]");
      for (const el of selects) {
        const input = el;
        input.addEventListener("change", (e) => {
          update();
        });
      }


      const input = document.querySelector("#demoFile");
      input?.addEventListener("change", (event) => {
        const target = event.target;
        const files = target.files;
        if (!files || files.length === 0) return;

        const reader = new FileReader();
        reader.onload = (e) => {
          if (!e.target) {
            return;
          }
          let result = e.target.result;
          if (result) {
            img.src = result.toString();
          }
        };
        reader.readAsDataURL(files[0]);
      });
    };
    demo();
  </script>
</body>

</html>